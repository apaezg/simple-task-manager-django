{% extends "base.html" %}
{% load comments %}

{% block content %}
<h1>Task Details</h1>

<ul class="list-group">
  <li class="list-group-item">Id: {{object.id}}</li>
  <li class="list-group-item">Status: {{object.get_status_display}}</li>
  <li class="list-group-item">Assigned to: {{object.assigned_to.username|default:"not assigned"}}</li>
  <li class="list-group-item">Created: {{object.created_by.username }} @ {{ object.created|date}}</li>
  <li class="list-group-item">Modified: {{object.modified_by.username }} @ {{ object.modified|date:"Y/m/d H:i"}}</li>
  <li class="list-group-item">
    <a href="{% url 'task_update' task.id %}" class="btn btn-primary">Edit</a>
    <a href="{% url 'task_list' %}" class="btn btn-warning">Back</a>
  </li>
</ul>

{% get_comment_count for object as comment_count %}
<p>This task has {{ comment_count }} comment{{ comment_count|pluralize }}.</p>
{% render_comment_list for object %}
{% get_comment_form for object as form %}
<table>
  <form action="{% comment_form_target %}" method="post">
    {% csrf_token %}
    {{ form }}
    <tr>
      <td colspan="2">
        <input type="submit" name="submit" value="Send" class="btn btn-success">
      </td>
    </tr>
  </form>
</table>
{% endblock %}